<html xmlns:f="http://typo3.org/ns/fluid/ViewHelpers"
      xmlns:smartvote="http://typo3.org/ns/Visol/EasyvoteSmartvote/ViewHelpers">

<f:layout name="Default"/>

<f:section name="main">

	<smartvote:script file="{f:uri.resource(path:'JavaScript/Libraries/Underscore/underscore-min.js')}"/>
	<smartvote:script file="{f:uri.resource(path:'JavaScript/Libraries/Backbone/backbone-min.js')}"/>
	<smartvote:script file="{f:uri.resource(path:'JavaScript/Libraries/BackboneLocalStorage/backbone.localStorage-min.js')}"/>
	<smartvote:script file="{f:uri.resource(path:'JavaScript/Libraries/D3/d3.min.js')}"/>
	<smartvote:script file="{f:uri.resource(path:'JavaScript/Build/QuestionBundle.js')}" canBeMinified="true"/>

	<div class="content-box">
		<h2>
			<f:translate key="who_to_elect"/>
		</h2>
		<p>
			<f:translate key="questionnaire.introduction" />
		</p>
		<div id="questionnaire-type-links">
			<a href="#version=short" id="btn-short-version" class="btn btn-primary link-questionnaire">{f:translate(key:'short_version')}</a>
			<a href="#version=long" id="btn-long-version">{f:translate(key:'long_version')}</a>
		</div>
	</div>

	<div id="spider-responsive"></div>

	<section id="container-questions">
		<div id="container-progress"></div>

		<div id="container-congratulations" class="content-box" style="display: none;">
			<h3><f:translate key="questions.you_have_done_it" /></h3>
			<p><f:translate key="questions.go_to_recommendation" /></p>
			<div>
				<f:link.page pageUid="{settings.candidateDirectoryNRPid}" class="btn btn-primary"><f:translate key="questions.recommendation_nr" /></f:link.page>
				<f:link.page pageUid="{settings.candidateDirectorySRPid}" class="btn btn-primary"><f:translate key="questions.recommendation_sr" /></f:link.page>
			</div>
		</div>
		<div id="container-question-list"></div>
	</section>

	<f:render partial="ProgressBar" section="ProgressBar"/>
	<f:render partial="Question" section="Question"/>
	<f:render partial="SpiderChartConfiguration" section="SpiderChartConfiguration" arguments="{_all}"/>

	<script>
		window.EasyvoteSmartvote = window.EasyvoteSmartvote || {};
		EasyvoteSmartvote.labelShortVersion = '{f:translate(key:"short_version")}';
		EasyvoteSmartvote.labeLongVersion = '{f:translate(key:"long_version")}';
		EasyvoteSmartvote.currentElection = '{currentElection.uid}' - 0;
		EasyvoteSmartvote.token = '{smartvote:token()}';
		EasyvoteSmartvote.tokenIgnoringTimeStamp = '{smartvote:token(ignoreTimeStamp: 1)}';
		EasyvoteSmartvote.pageUid = '{contentObjectData.pid}';
		EasyvoteSmartvote.sysLanguageUid = '{contentObjectData.sys_language_uid}';
		EasyvoteSmartvote.isUserAuthenticated = {f:if(condition: "{smartvote:isUserAuthenticated()}", then: 'true', else: 'false')}
		EasyvoteSmartvote.questionState = {smartvote:questionState()};
	</script>

</f:section>

</html>